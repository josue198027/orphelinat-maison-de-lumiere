!function(){const e="data-sk-manual-edit",t="data-sk-ai-edit";function n(e){if(!e)return"";const t=e.id;return"object"==typeof t&&null!==t&&"baseVal"in t?t.baseVal:t||""}function o(e){if(!e)return"";const t=e.className;return"object"==typeof t&&null!==t&&"baseVal"in t?t.baseVal:t||""}function i(e){return"object"==typeof e&&null!==e&&"baseVal"in e?e.baseVal:String(e)}function a(e){if(!e)return"";const t=n(e);if(t)return`//*[@id="${t}"]`;if(e===document.body)return"/html/body";let o="",i=e;for(;i&&i!==document.body;){let e=1,t=i.previousElementSibling;for(;t;)t.tagName===i.tagName&&e++,t=t.previousElementSibling;o=`/${i.tagName.toLowerCase()}[${e}]${o}`,i=i.parentElement}return`/html/body${o}`}function l(e){const t={iframeId:window.frameElement&&window.frameElement.getAttribute("data-index")||"0",uuid:window.frameElement&&window.frameElement.getAttribute("data-uuid")||""};Object.assign(e,t),window.parent.postMessage(e,"*")}function r(e){if(!e)return null;try{const t=e.getAttribute("data-lov-id")||"",a=t.split(":"),l=t,r=a.length>=2?parseInt(a[1]):null,s=a.length>=3?parseInt(a[2]):null,d=e.getAttribute("data-component-path")||"",c=e.getAttribute("data-component-file")||"",u={};Array.from(e.attributes).forEach((e=>{e.name.startsWith("data-")||(u[e.name]=i(e.value))}));const m=o(e);let g={};try{const t=e.getAttribute("data-component-content");t&&(g=JSON.parse(decodeURIComponent(t)))}catch(e){console.warn("Ëß£Êûêdata-component-contentÂ§±Ë¥•:",e)}const f=e.textContent||"",p=e.tagName.toLowerCase(),y=[];return Array.from(e.children).forEach((e=>{y.push({tagName:e.tagName.toLowerCase(),className:o(e),textContent:e.textContent||"",id:n(e)})})),{dom_id:l,file_path:d,file_name:c,attrs:u,children:y,class_name:m,content:g,text_content:f,element_type:p,line_number:r,col_number:s}}catch(e){return console.warn("Ëß£ÊûêDOM‰ø°ÊÅØÂ§±Ë¥•:",e),null}}window.MANUAL_EDIT_ATTR=e,window.AI_EDIT_ATTR=t,window.__sk_editor={debounce:(e,t,n)=>{let o,i,a,l,r,s=0;"boolean"==typeof n&&(n={leading:n,trailing:!n});const{leading:d=!1,trailing:c=!0,maxWait:u}=n||{},m="number"==typeof u;function g(t){const n=i,o=a;return i=a=void 0,s=t,l=e.apply(o,n),l}function f(e){const n=e-r;return void 0===r||n>=t||n<0||m&&e-s>=u}function p(){const e=Date.now();if(f(e))return y(e);o=setTimeout(p,function(e){const n=e-s,o=t-(e-r);return m?Math.min(o,u-n):o}(e))}function y(e){return o=void 0,c&&i?g(e):(i=a=void 0,l)}function E(...e){const n=Date.now(),c=f(n);if(i=e,a=this,r=n,c){if(void 0===o)return function(e){return s=e,o=setTimeout(p,t),d?g(e):l}(r);if(m)return o=setTimeout(p,t),g(r)}return void 0===o&&(o=setTimeout(p,t)),l}return E.cancel=function(){void 0!==o&&clearTimeout(o),s=0,i=r=a=o=void 0},E.flush=function(){return void 0===o?l:y(Date.now())},E.pending=function(){return void 0!==o},E},getXPath:a,postMessageToParent:l,updateElementPosition:function(e,t){if(!e)return;const s=a(e),d=function(e,t){if(!e)return-1;const n=document.documentElement.outerHTML,o=e.trim();if(t&&"string"==typeof t&&"function"==typeof document.evaluate)try{const e=document.evaluate(t,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof Element){const t=e.outerHTML.trim();let o=-1,i=0;for(;-1!==(o=n.indexOf(t,o+1));)if(i++,n.slice(o,o+t.length)===t&&e.outerHTML.trim()===t)return i}}catch(e){}let i=-1,a=0;for(;-1!==(i=n.indexOf(o,i+1));)a++;return a>0?a:-1}(e.outerHTML,s),c="IMG"===e.tagName&&"FIGCAPTION"===e.nextElementSibling?.tagName?e.nextElementSibling.innerText:"",u=window.getComputedStyle(e),m={heading:e.tagName.toLowerCase(),fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight,fontStyle:u.fontStyle,textDecoration:u.textDecoration,textAlign:u.textAlign,color:u.color,backgroundColor:u.backgroundColor,letterSpacing:u.letterSpacing,lineHeight:u.lineHeight,marginTop:u.marginTop,marginRight:u.marginRight,marginBottom:u.marginBottom,marginLeft:u.marginLeft,paddingTop:u.paddingTop,paddingRight:u.paddingRight,paddingBottom:u.paddingBottom,paddingLeft:u.paddingLeft,borderRadius:u.borderRadius},g=r(e),f=void 0!==e.innerText?e.innerText:e.textContent||"",p=e.getBoundingClientRect(),y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;l({type:"ELEMENT_SELECT",payload:{tagName:e.tagName,id:n(e),className:o(e),innerText:f,outerHTML:e.outerHTML,xPath:s,focusType:t,attributes:Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=i(t.value),e)),{}),content:JSON.parse(decodeURIComponent(e.getAttribute("data-component-content")||"{}")),styles:Array.from(e.style).reduce(((t,n)=>(t[n]=e.style[n],t)),{}),computedStyles:m,rect:{left:p.left,top:p.top,width:p.width,height:p.height},iframeWidth:y,matchIndex:d,figcaption:c,domInfo:g}})},getModifiedType:function(){return document.body.hasAttribute(t)?"ai":document.body.hasAttribute(e)?"manual":"none"},parseDomInfo:r,getIdSafe:n,getClassNameSafe:o,getAttributeValueSafe:i}}(),function(){let e=null,t=null,n=null,o=null,i=!1,a=null,l=null,r=null,s=0;const d=["p","h1","h2","h3","h4","h5","h6","span","a"];function c(){const e=document.getElementById("highlightBox-tools");e&&e.remove();const t=document.getElementById("hoverBox-tools");t&&t.remove();const n=document.createElement("div");n.id="highlightBox-tools",Object.assign(n.style,{position:"absolute",pointerEvents:"none",border:"2px solid #00EBBE",zIndex:"9999",boxSizing:"border-box",display:"none"});const o=window.frameElement,i=["gen_ppt"].includes(o&&o.getAttribute("data-type")||"");n.innerHTML=i?'\n          <div style="position:absolute;top:0px;left:50%;transform:translate(-50%,-50%);z-index:10000;pointer-events:auto;">\n            <div id="drag-btn" style="width:26px;height:16px;border-radius:6px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px rgba(0,0,0,0.15);cursor:grab;transition:box-shadow 0.2s;pointer-events:auto;">\n              <svg width="27" height="16" viewBox="0 0 27 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <rect x="1.5" y="1" width="24" height="14" rx="5" fill="#00EBBE"/>\n                <rect x="1.5" y="1" width="24" height="14" rx="5" stroke="white" stroke-width="2"/>\n                <path d="M18.5 7.00001L18.6016 7.00489C19.106 7.05576 19.4998 7.48211 19.5 8.00001C19.5 8.51765 19.1067 8.94379 18.6025 8.99513L18.5 9.00001H8.4961C7.94391 8.9977 7.49785 8.54826 7.50001 7.9961C7.50232 7.44391 7.95176 6.99785 8.50391 7.00001H18.5Z" fill="white"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tagname-label" style="position:absolute;top:-2px;left:-2px;transform:translateY(-100%);background:#00EBBE;color:white;font-size:12px;padding:2px 6px;border-radius:6px 6px 0 0;font-family:Arial,sans-serif;line-height:1;white-space:nowrap;"></div>\n        ':'\n          <div class="tagname-label" style="position:absolute;top:-2px;left:-2px;transform:translateY(-100%);background:#00EBBE;color:white;font-size:12px;padding:2px 6px;border-radius:6px 6px 0 0;font-family:Arial,sans-serif;line-height:1;white-space:nowrap;"></div>\n        ',document.body.appendChild(n);const a=document.createElement("div");a.id="hoverBox-tools",Object.assign(a.style,{position:"absolute",pointerEvents:"none",border:"2px dashed #00EBBE",zIndex:"9998",boxSizing:"border-box",display:"none"}),a.innerHTML='\n        <div class="tagname-label" style="position:absolute;top:-2px;left:-2px;transform:translateY(-100%);background:#00EBBE;color:white;font-size:12px;padding:2px 6px;border-radius:6px 6px 0 0;font-family:Arial,sans-serif;line-height:1;white-space:nowrap;"></div>\n      ',document.body.appendChild(a)}function u(e,t,n,o={}){const i=function(e){if(!e.target.closest)return;const o=e.target.closest(t);o&&n.call(o,e,o)};return document.addEventListener(e,i,o),function(){document.removeEventListener(e,i,o)}}function m(e){for(;e;){if("svg"===e.nodeName)return e;e=e.parentElement}return null}function g(e){return e.hasAttribute("data-sk-deleted")}function f(n,o){let i=n;if(!i){const e=window.getSelection();if(!e||!e.rangeCount)return;const t=e.getRangeAt(0);if(!t)return;i=t.commonAncestorContainer,i.nodeType===Node.TEXT_NODE&&(i=i.parentElement)}if(function(e,t){return!(!e||!t)&&e.outerHTML===t.outerHTML}(i,o)&&!g(i))return void console.log("==========ÂÖÉÁ¥†Êú™‰øÆÊîπÔºå‰∏çÊ∑ªÂä†ÁºñËæëÊ†áËØÜ");if(document.body.hasAttribute(MANUAL_EDIT_ATTR)||(console.log("==========Ê∑ªÂä†ÊâãÂä®ÁºñËæëÊ†áËØÜ"),document.body.setAttribute(MANUAL_EDIT_ATTR,"true")),!g(i)){if(i.hasAttribute("data-sk-edited"))return;i.setAttribute("data-sk-edited",""),console.log("Â∑≤ÁºñËæë",i)}const a=[],l=["BODY","DIV","LI","P"];!function e(t){if(!t)return;const n=t.nodeName.toUpperCase();if(l.indexOf(n)>-1){t.querySelectorAll(".sk-source-tag[data-sk-source-id]").forEach((e=>{a.indexOf(e)>-1&&e.setAttribute("data-sk-source-delete","")}))}else a.push(...function(e){const t=[];let n=e.nextElementSibling;for(;n;)t.push(n),n=n.nextElementSibling;return t}(t)),e(t.parentElement)}(i),g(i)&&(i.parentElement.removeChild(i),e=null,t=null,x(),setTimeout((()=>{S()}),100))}function p(e,t){return t&&console.log("_isIMGTag",e),!!m(e)||e&&"IMG"===e.tagName}window.addEventListener("load",(function(){c(),B()})),window.addEventListener("load",(function(){if(!document.querySelector("#sk-table-padding-style")){const e=document.createElement("style");e.id="sk-table-padding-style",e.textContent="\n        .sk-table-selectable {\n          padding-bottom: 8px !important;\n          border-collapse: separate;\n        }\n      ",document.head.appendChild(e)}document.querySelectorAll("table:not(.sk-table-selectable)").forEach((e=>{e.classList.add("sk-table-selectable")}))}));const y=((e,t)=>{let n=0;return function(...o){const i=Date.now();i-n>=t&&(n=i,e.apply(this,o))}})((e=>{window.__sk_editor.postMessageToParent({type:"DRAG_MOVE",payload:{currentPosition:{x:e.clientX,y:e.clientY},offset:{x:e.clientX-L.x,y:e.clientY-L.y}}})}),16);function E(e,t=!1){const n=e.target;if(!n)return null;if("BODY"===n.tagName||"HTML"===n.tagName||n.parentElement&&"BODY"===n.parentElement.tagName)return null;const o=getComputedStyle(n).display;if("block"===o||"flex"===o||"inline-flex"===o||"inline-block"===o||"table"===o||"grid"===o||"inline-grid"===o){if(p(n,t)){const e=m(n);return e||n}return t&&console.log("ÂÖÉÁ¥†ÈÄöËøá display Ê£ÄÊü•"),n}if(p(n,t)){const e=m(n);return e||n}let i;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);t&&(i={startContainer:t.offsetNode,startOffset:t.offset})}if(i&&i.startContainer&&i.startContainer.nodeType===Node.TEXT_NODE){const e=i.startContainer.parentElement;return e||null}return null}function h(e,t){if(!e||!t||!i&&(!p(t)&&"CANVAS"!==t.tagName||"hoverBox-tools"===e.getAttribute("id")))return;const n=p(t)?8:4,o=p(t)?8:2,a=t.getBoundingClientRect();Object.assign(e.style,{left:window.scrollX+a.left-n+"px",top:window.scrollY+a.top-o+"px",width:a.width+2*n+"px",height:a.height+2*o+"px",display:"block"});const l=e.querySelector(".tagname-label");l&&t&&(l.textContent=t.tagName.toLowerCase())}function w(){let e=document.documentElement.outerHTML;n=e.replace(/class\s*=\s*["']([^"']*)["']/gi,((e,t)=>`class="${t.split(/\s+/).filter((e=>e&&"sk-edit-loading"!==e)).join(" ")}"`))}function _(e=null){a=e}function b(){if(!r)return;const e=r;e.removeAttribute("contenteditable"),e.style.outline="",e.style.outlineOffset="",e.style.backgroundColor="",e.style.caretColor="",0===e.style.length&&null!==e.getAttribute("style")&&(console.log("==========ÁßªÈô§Á©∫ÁöÑ style Â±ûÊÄß"),e.removeAttribute("style")),e.blur(),window.getSelection&&window.getSelection().removeAllRanges(),r=null}function x(n=!1){b(),e&&(console.log("==========clearEditing _dynamicallyDeleteSource",e,t),f(e,t),e.style.outline="",e=null,t=null);const o=document.getElementById("highlightBox-tools");o&&(o.style.display="none"),n||window.__sk_editor.postMessageToParent({type:"ELEMENT_SELECT",payload:null})}function T(e){if(!e)return;h(document.getElementById("highlightBox-tools"),e),window.__sk_editor.updateElementPosition(e,"click")}let v=!1,N=null,L={x:0,y:0};function A(t){e&&(v=!0,N=e,L={x:t.clientX,y:t.clientY},window.__sk_dragStartTime=Date.now(),document.body.style.userSelect="none",t.target.style.cursor="grabbing",window.__sk_editor.postMessageToParent({type:"DRAG_START",payload:{element:{tagName:N.tagName,id:window.__sk_editor.getIdSafe(N),className:window.__sk_editor.getClassNameSafe(N),xPath:window.__sk_editor.getXPath(N)},startPosition:{x:t.clientX,y:t.clientY}}}),t.stopPropagation(),t.preventDefault())}setTimeout((()=>{u("mousedown","#drag-btn",A),u("mouseenter","#drag-btn",(()=>{const e=document.getElementById("drag-btn");e&&(e.style.cursor="grab")})),u("mouseleave","#drag-btn",(()=>{const e=document.getElementById("drag-btn");e&&(e.style.cursor="grab")}))}),0),document.addEventListener("mousemove",(function(e){if(!v||!N)return;!function(e,t,n){if(!e||!t||!i)return;const o=t.getBoundingClientRect(),{clientX:a,clientY:l}=n;Object.assign(e.style,{left:window.scrollX+a-o.width/2-4+"px",top:window.scrollY+l-2+"px",width:o.width+8+"px",height:o.height+4+"px",display:"block"});const r=e.querySelector(".tagname-label");r&&t&&(r.textContent=t.tagName.toLowerCase())}(document.getElementById("hoverBox-tools"),N,e),y(e),e.preventDefault()})),document.addEventListener("mouseup",(function(e){if(!v||!N)return;setTimeout((()=>{v=!1}),10),document.body.style.userSelect="";const t=document.getElementById("drag-btn");t&&(t.style.cursor="grab");const n=e.clientX-L.x,o=e.clientY-L.y;let i=N.style.transform||"",a=i.match(/translate\(([-\d.]+)px,\s*([-\d.]+)px\)/),l=0,r=0;a&&(l=parseFloat(a[1]),r=parseFloat(a[2]),i=i.replace(/translate\(([-\d.]+)px,\s*([-\d.]+)px\)/,""));const s=l+n,d=r+o;N.style.transform=`${i} translate(${s}px, ${d}px)`,N.style.animation="unset",N.style.transition="unset";const c=document.getElementById("hoverBox-tools");c&&(c.style.display="none"),T(N),window.__sk_editor.postMessageToParent({type:"DRAG_END",payload:{element:{tagName:N.tagName,id:window.__sk_editor.getIdSafe(N),className:window.__sk_editor.getClassNameSafe(N),xPath:window.__sk_editor.getXPath(N)},startPosition:L,endPosition:{x:e.clientX,y:e.clientY},totalOffset:{x:n,y:o},duration:Date.now()-(window.__sk_dragStartTime||Date.now())}}),N=null,delete window.__sk_dragStartTime,document.body.hasAttribute(MANUAL_EDIT_ATTR)||document.body.setAttribute(MANUAL_EDIT_ATTR,"true"),C()})),document.addEventListener("mousemove",(function(t){if(v&&N||!i)return;const n=t.target,o=E(t),a=document.getElementById("highlightBox-tools"),l=document.getElementById("hoverBox-tools");!o||n!==o&&"svg"!==o.nodeName||o===a||o===l||o===e||o.hasAttribute("data-sk-reference-id")?l&&(l.style.display="none"):h(l,o)})),document.addEventListener("mouseleave",(function(e){if(v)return;console.log("mouseleave");const t=document.getElementById("hoverBox-tools");t&&(t.style.display="none")})),document.addEventListener("click",(function(n){if(v||!i)return!1;n.preventDefault(),n.stopPropagation();let o=function(e){if("HTML"!==e.target?.tagName&&"BODY"!==e.target?.tagName)return null;const t=document.querySelectorAll('button[role="combobox"]');let n=null;for(const o of t){const t=o.getBoundingClientRect();if(e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom){n=o,console.log("‚úÖ ÂùêÊ†áÊ£ÄÊµãÔºöÁÇπÂáª‰∫Ü combobox",{rect:{left:t.left,right:t.right,top:t.top,bottom:t.bottom},click:{x:e.clientX,y:e.clientY}});break}}return n?(console.log("‚úÖ Ê£ÄÊµãÂà∞ÁÇπÂáª comboboxÔºåÈÄâ‰∏≠ÊåâÈíÆ"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n):null}(n);o||(o=n.target);const a=E({...n,target:o,clientX:n.clientX,clientY:n.clientY},!0),c=document.getElementById("highlightBox-tools"),u=document.getElementById("hoverBox-tools");if(console.log("üéØ Click‰∫ã‰ª∂ - Ê£ÄÊü•ÂÖÉÁ¥†:",{"ÁúüÂÆûÁÇπÂáªÂÖÉÁ¥†_el":o?.tagName,"getEditableTargetËøîÂõûel":a?a.tagName:null,"ÊòØÂê¶Áõ∏Âêå":o===a,"elÊòØÂê¶‰∏∫Á©∫":!a,"elÊòØhighlightBox":a===c,"elÊòØhoverBox":a===u}),!a||a===c||a===u||o!==a&&"svg"!==a.nodeName&&"BUTTON"!==a.tagName||a.hasAttribute("data-sk-reference-id"))return void console.log("‚ùå Click‰∫ã‰ª∂ - ÂÖÉÁ¥†Ë¢´ËøáÊª§Ôºå‰∏çÂ§ÑÁêÜ");if(console.log("‚úÖ Click‰∫ã‰ª∂ - ÂÖÉÁ¥†ÈÄöËøáÊ£ÄÊü•ÔºåÁªßÁª≠Â§ÑÁêÜ"),!i&&!p(o)&&"CANVAS"!==o.tagName)return void x(!0);const m=Date.now(),g=l===a&&m-s<300;l=a,s=m;const f=d.includes(a.tagName.toLowerCase());if(g&&f)return function(e){if(!e)return!1;try{const t=window.__sk_editor.parseDomInfo(e);return!!(t&&t.content&&t.content.text)}catch(e){return console.warn("Âà§Êñ≠ÂÖÉÁ¥†ÂèØÁºñËæëÊÄßÂ§±Ë¥•:",e),!1}}(a)?void function(e){if(!e||r===e)return;b(),r=e,e.setAttribute("contenteditable","true");const t=window.getComputedStyle(e),n=t.color,o=t.backgroundImage;if(("rgba(0, 0, 0, 0)"===n||"transparent"===n)&&o&&o.includes("gradient")){const t=o.match(/rgba?\(\d+,\s*\d+,\s*\d+(?:,\s*[\d.]+)?\)/g);if(t&&t.length>0){const n=Math.floor(t.length/2);e.style.caretColor=t[n]}else e.style.caretColor="#333"}else"rgba(0, 0, 0, 0)"!==n&&"transparent"!==n||(e.style.caretColor="#333");if(e.style.outline="0px solid #00EBBE",e.style.outlineOffset="2px",e.style.backgroundColor="rgba(0, 235, 190, 0.1)",e.focus(),window.getSelection){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}console.log("ËøõÂÖ•ÊñáÊú¨ÁºñËæëÊÄÅ:",e),window.__sk_editor.postMessageToParent({type:"TEXT_EDIT_MODE_ENTER",payload:{tagName:e.tagName,id:window.__sk_editor.getIdSafe(e),className:window.__sk_editor.getClassNameSafe(e),xPath:window.__sk_editor.getXPath(e),domInfo:window.__sk_editor.parseDomInfo(e)}})}(a):void window.__sk_editor.postMessageToParent({type:"TEXT_EDIT_DISABLED",payload:{tagName:a.tagName,id:window.__sk_editor.getIdSafe(a),className:window.__sk_editor.getClassNameSafe(a),xPath:window.__sk_editor.getXPath(a),message:"ËØ•ÂÖÉÁ¥†‰∏çÊîØÊåÅÊñáÊú¨ÁºñËæë"}});const y=e===a;e&&e!==a&&(e.style.outline=""),y||(e=a,t=a.cloneNode(!0)),u&&(u.style.display="none"),window.__sk_editor.postMessageToParent({type:"DRAG_HANDLER_SHOW",payload:{element:{tagName:a.tagName,id:window.__sk_editor.getIdSafe(a),className:window.__sk_editor.getClassNameSafe(a),xPath:window.__sk_editor.getXPath(a)},draggHandler:document.getElementById("highlightBox-tools")?.innerHTML?.includes("drag-btn")}}),setTimeout((()=>{T(a)}),200)}),!0),document.addEventListener("mousedown",(function(t){const n=document.getElementById("highlightBox-tools"),o=t.target instanceof Node?t.target:null;r&&o!==r&&b(),o!==e&&n&&!n.contains(o)&&x()}));const D=window.__sk_editor.debounce((function(t){h(document.getElementById("highlightBox-tools"),e);const n=window.__sk_editor.parseDomInfo(e),o=e?.getAttribute("data-component-name");if(!n)return;_({type:"editText",path:n.file_path,line:n.line_number,componentName:o,newText:n.text_content}),C()}),300);function k(e){const t=window.getSelection();if(!t||!t.rangeCount)return;const n=t.getRangeAt(0);n.deleteContents(),n.insertNode(document.createTextNode(e)),n.collapse(!1),t&&(t.removeAllRanges(),t.addRange(n))}document.addEventListener("input",D),document.addEventListener("paste",(function(t){if(!e)return;const n=t.clipboardData;if(!n)return;const o=n.items||[];for(let e=0;e<o.length;e++){const n=o[e];if("string"===n.kind&&"text/plain"===n.type)return t.preventDefault(),void n.getAsString((function(e){k(e)}));if("file"===n.kind&&n.type.startsWith("image/"))return t.preventDefault(),void console.log("ÂõæÁâáÂ∑≤Ë¢´ËøáÊª§")}t.preventDefault();k(n.getData("text/plain")),C()})),window.addEventListener("scroll",(function(){if(e){h(document.getElementById("highlightBox-tools"),e)}}),!0);const I=window.__sk_editor.debounce((function(){window.__sk_editor.postMessageToParent({type:"IFRAME_SCROLL",payload:{scrollTop:window.scrollY||document.documentElement.scrollTop,scrollLeft:window.scrollX||document.documentElement.scrollLeft,scrollHeight:document.documentElement.scrollHeight,clientHeight:document.documentElement.clientHeight}})}),300,{leading:!0,trailing:!1});function C(o,i=!1){window.__sk_editor.postMessageToParent({type:"ELEMENT_UPDATED",payload:{html:n,immediate:!0,action:a}}),o||f(e,t),i||T(e),setTimeout((()=>{w(),window.__sk_editor.postMessageToParent({type:"ELEMENT_UPDATED",payload:{html:n,action:a}})}),300)}function M(e){let t;if(!t&&e.xPath)try{t=document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(e){console.error("XPath Êü•ËØ¢Â§±Ë¥•:",e)}if(console.log("targetElement by xPath:",t),!t&&e.lovId){const n=e.lovId;try{t=document.querySelector(`[data-lov-id="${n}"]`)}catch(e){console.error("data-lov-id Êü•ËØ¢Â§±Ë¥•:",e)}}return console.log("targetElement by lovId:",t),t}function S(){const e=["highlightBox-tools","hoverBox-tools"],t=Array.from(document.body.children).filter((t=>!e.includes(t.id))),n=t.some((e=>{if(e.nodeType===Node.ELEMENT_NODE){if("P"===e.tagName){const t=Array.from(e.childNodes),n=1===t.length&&t[0].nodeType===Node.ELEMENT_NODE&&"BR"===t[0].tagName,o=0===t.length||1===t.length&&!t[0].textContent?.trim();if(n||o)return!1}const t=e.textContent?.trim();return t&&t.length>0}return!1})),o=Array.from(document.body.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()));if(!n&&0===o.length&&0===t.length){const e=document.createElement("div");e.classList.add("container");const t=document.createElement("p");t.textContent="Enter content here",e.appendChild(t),document.body.appendChild(e)}}window.addEventListener("scroll",I,{passive:!0}),window.onblur=()=>{console.log("iframe onblur"),o=setTimeout((()=>{x(),console.log("iframe onblur clearEditing")}),800)},window.addEventListener("load",(function(){setTimeout((()=>{w()}),1e3)})),window.addEventListener("resize",(function(){T(e)}));let P=null;function B(){P&&(P.disconnect(),P=null),P=new MutationObserver((e=>{let t=!1;e.forEach((e=>{"childList"===e.type&&(t=!0),"characterData"===e.type&&(t=!0)})),t&&setTimeout((()=>{S()}),100)})),P.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),setTimeout((()=>{S()}),500)}function R(e,t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if("heading"===n)continue;if("textDecoration"===n){const n=t.textDecoration&&t.textDecoration.trim();e.style.textDecoration=n&&"__REMOVE_DECORATION__"!==n?n:"none"}else e.style[n]=t[n]}}window.addEventListener("message",(function(t){if("UPDATE_ELEMENT"===t.data.type)!function(t){const n=document.evaluate(t.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!(n&&n instanceof Element))return;if(void 0!==t.innerText&&(n instanceof HTMLElement?n.innerText=t.innerText:n.textContent=t.innerText),t.attributes&&Object.keys(t.attributes).forEach((e=>{null===t.attributes[e]?n.removeAttribute(e):n.setAttribute(e,t.attributes[e])})),t.styles&&(n instanceof HTMLElement||n instanceof SVGElement)){const e=n.style;e&&Object.keys(t.styles).forEach((n=>{null===t.styles[n]?e.removeProperty(n):e.setProperty(n,t.styles[n])}))}if(t.replaceElement){const o=document.createElement("div");o.innerHTML=t.replaceElement;const i=o.firstChild;i&&(n.replaceWith(i),e=i)}C(null===t.attributes?.["data-sk-edited"])}(t.data.payload),_(t.data.payload?.action);else if("DELETE_ELEMENT"===t.data.type)!function(e){const t=M(e);t&&t instanceof Element&&(t.setAttribute("data-sk-deleted",""),C())}(t.data.payload),_(t.data.payload?.action);else if("REPLACE_HTML"===t.data.type)n=t.data.payload?.html,console.log("replaceHTML",n),document.body.outerHTML=n,document.body.classList.add("sk-hide-tag"),c(),B(),x(),w(),setTimeout((()=>{S();const e=new Event("resize");document.body.dispatchEvent(e)}),200);else if("APPLY_ELEMENT_STYLES"===t.data.type){const n=M(t.data.payload);if(!(n&&n instanceof Element))return;!function(t,n){if(!(t&&t instanceof Element))return;let o;n.heading&&n.heading!==t.tagName.toLowerCase()?(o=document.createElement(n.heading),o.innerHTML=t.innerHTML,Array.from(t.attributes).forEach((e=>{o.setAttribute(e.name,e.value)})),R(o,n),t.parentNode&&t.parentNode.replaceChild(o,t),e=o):(R(t,n),o=t);C(),window.focus()}(n,t.data.payload?.styles)}else if("APPLY_ELEMENT_CLASSES"===t.data.type){const e=M(t.data.payload);if(!(e&&e instanceof Element))return;!function(e,t,n){if(!(e&&e instanceof Element))return;try{e.className=t,C(),window.focus()}catch(e){console.warn("applyClassesToElement error",e)}}(e,t.data.payload?.classes||[],t.data.payload),_(t.data.payload?.action)}else if("ELEMENT_LOADING"===t.data.type){const n=t.data.payload?.xPath;if(n){const t=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;t&&t instanceof Element&&(t.classList.add("sk-edit-loading"),T(e))}}else if("STOP_ELEMENT_LOADING"===t.data.type){const n=t.data.payload?.xPath;if(n){const t=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;t&&t instanceof Element&&(t.classList.remove("sk-edit-loading"),T(e))}}else if("CLEAR_EDITING"===t.data.type)x(t.data.payload?.notPostMessage),clearTimeout(o);else if("STOP_IFRAME_BLUR"===t.data.type){null!==o&&clearTimeout(o),console.log("STOP_IFRAME_BLUR");const e=window.frameElement;e&&e instanceof HTMLIFrameElement&&"function"==typeof e.focus&&e.focus()}else if("SET_EDIT_MODE"===t.data.type){i=!!t.data.payload?.isEditMode;let e=document.getElementById("hoverBox-tools"),n=document.getElementById("highlightBox-tools");e&&n&&(e.style.display=i?"block":"none",n.style.display=i?"block":"none"),x(),function(e){const t="sk-editor-combobox-style",n=document.getElementById(t);if(e){if(!n){const e=document.createElement("style");e.id=t,e.textContent='\n          /* ÈÄöÁî®ÊñπÊ°àÔºöÈöêËóèÊâÄÊúâ‰∏ãÊãâÊ°ÜÁõ∏ÂÖ≥ÂÖÉÁ¥† */\n          [role="listbox"],\n          [role="menu"],\n          [role="dialog"][aria-modal="true"],\n          /* Radix UI */\n          [data-radix-popper-content-wrapper],\n          [data-radix-select-content],\n          [data-radix-portal],\n          /* Ant Design */\n          .ant-select-dropdown,\n          .ant-dropdown,\n          /* Material UI */\n          .MuiPopover-root,\n          .MuiMenu-root,\n          /* Headless UI */\n          [data-headlessui-portal],\n          /* Arco Design */\n          .arco-select-popup,\n          .arco-dropdown {\n            display: none !important;\n            visibility: hidden !important;\n            pointer-events: none !important;\n            opacity: 0 !important;\n          }\n        ',document.head.appendChild(e),console.log("‚úÖ Â∑≤Ê∑ªÂä†ÈÄöÁî® combobox ÈöêËóèÊ†∑ÂºèÔºàÁºñËæëÊ®°ÂºèÔºâ")}}else n&&(n.remove(),console.log("‚úÖ Â∑≤ÁßªÈô§ combobox ÈöêËóèÊ†∑ÂºèÔºàÈ¢ÑËßàÊ®°ÂºèÔºâ"))}(i)}else if("RELOAD"===t.data.type)window.location.reload();else if("CALL_IFRAME_METHOD"===t.data.type){const{methodName:e,args:n,requestId:o}=t.data.payload;let i=null,a=null;try{if(window.__sk_editor&&"function"==typeof window.__sk_editor[e])i=window.__sk_editor[e].apply(window.__sk_editor,n||[]);else{const t=window[e];if("function"!=typeof t)throw new Error(`Method '${e}' not found`);i=t.apply(window,n||[])}}catch(e){a=e.message||String(e)}window.__sk_editor.postMessageToParent({type:"CALL_IFRAME_METHOD_RESPONSE",payload:{requestId:o,result:i,error:a}})}var n})),window.addEventListener("keydown",(function(e){if(r)return"Escape"===e.key?(e.preventDefault(),void b()):"Enter"!==e.key||e.shiftKey?void 0:(e.preventDefault(),void b());(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),window.__sk_editor.postMessageToParent({type:"EDIT_UNDO"})),(e.ctrlKey||e.metaKey)&&("y"===e.key||"Z"===e.key&&e.shiftKey)&&(e.preventDefault(),window.__sk_editor.postMessageToParent({type:"EDIT_REDO"}))}))}();